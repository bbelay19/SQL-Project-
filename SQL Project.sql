# Task 2 Create Database by Bethlehem Belay
DROP DATABASE IF EXISTS P3_DB;
CREATE DATABASE P3_DB;

USE P3_DB;
SHOW DATABASES;

# Task 3 - Create tables by Bethlehem Belay
SHOW TABLES;

CREATE TABLE TEACHER_BB (
TEACHER_ID_BB INT PRIMARY KEY,
FIRST_NAME_BB VARCHAR(22),
LAST_NAME_BB VARCHAR(22),
MIDDLE_NAME_BB VARCHAR(22),
WORK_EMAIL_BB VARCHAR(30),
PERSONAL_EMAIL_BB VARCHAR(30),
GRADUATED_COLLEGE_BB VARCHAR(50),
DEGREE_AREA_BB VARCHAR(25)
);

CREATE TABLE CLASS_BB (
CLASS_ID_BB INT PRIMARY KEY,
CLASS_CODE_BB VARCHAR(5),
CLASS_NAME_BB VARCHAR(50),
CLASS_COLOR_BB VARCHAR(20),
ROOM_NUMBER_BB VARCHAR(10),
MAX_CAPACITY_BB VARCHAR(29),
DIRECTIONS_BB VARCHAR(130),
TEACHER_ID_BB INT,
FOREIGN KEY (TEACHER_ID_BB) REFERENCES TEACHER_BB(TEACHER_ID_BB)
);

CREATE TABLE STUDENT_BB (
STUDENT_ID_BB INT PRIMARY KEY,
FIRST_NAME_BB VARCHAR(22),
LAST_NAME_BB VARCHAR(22),
MIDDLE_NAME_BB VARCHAR(22),
NICK_NAME_BB VARCHAR(20),
DOB_BB DATE,
ADDRESS_BB VARCHAR(50),
CITY_BB VARCHAR(15),
ZIP_CODE_BB VARCHAR(10),
STREET_BB VARCHAR(35),
CLASS_ID_BB INT,
FOREIGN KEY (CLASS_ID_BB) REFERENCES CLASS_BB(CLASS_ID_BB)
);

CREATE TABLE PARENT_BB (
PARENT_ID_BB INT PRIMARY KEY,
FIRST_NAME_BB VARCHAR(22),
LAST_NAME_BB VARCHAR(22),
MIDDLE_NAME_BB VARCHAR(22),
HOME_NUMBER_BB VARCHAR(15),
MOBILE_NUMBER_BB VARCHAR(15),
WORK_NUMBER_BB VARCHAR(15),
PERSONAL_EMAIL_BB VARCHAR(30),
RELATIONSHIP_BB VARCHAR(20)
);
CREATE TABLE PARENT_BB_STUDENT_BB (
PARENT_ID_BB INT,
STUDENT_ID_BB INT,
PRIMARY KEY (PARENT_ID_BB, STUDENT_ID_BB),
FOREIGN KEY (PARENT_ID_BB) REFERENCES PARENT_BB(PARENT_ID_BB),
FOREIGN KEY (STUDENT_ID_BB) REFERENCES STUDENT_BB(STUDENT_ID_BB)
);

CREATE TABLE TEACHER_BB_STUDENT_BB (
TEACHER_ID_BB INT,
STUDENT_ID_BB INT,
PRIMARY KEY (TEACHER_ID_BB, STUDENT_ID_BB),
FOREIGN KEY (TEACHER_ID_BB) REFERENCES TEACHER_BB(TEACHER_ID_BB),
FOREIGN KEY (STUDENT_ID_BB) REFERENCES STUDENT_BB(STUDENT_ID_BB)
);

SHOW TABLES;
DESCRIBE CLASS_BB;
DESCRIBE STUDENT_BB;
DESCRIBE PARENT_BB;
DESCRIBE TEACHER_BB;

#Task 4 - Add data by Bethlehem Belay
SELECT * FROM CLASS_BB;
SELECT * FROM STUDENT_BB;
SELECT * FROM PARENT_BB;
SELECT * FROM TEACHER_BB;

-- Task 4 - Add data by Bethlehem Belay
INSERT INTO TEACHER_BB VALUES
(101, 'Teacher', 'One', 'X', 'teacher1@example.com', 't1@example.com', 'University A', 'MS'),
(102, 'Teacher', 'Two', 'Y', 'teacher2@example.com', 't2@example.com', 'University B', 'MA'),
(103, 'Teacher', 'Three', 'Z', 'teacher3@example.com', 't3@example.com', 'University C', 'PhD'),
(104, 'Teacher', 'Four', 'W', 'teacher4@example.com', 't4@example.com', 'University D', 'BS'),
(105, 'Teacher', 'Five', 'V', 'teacher5@example.com', 't5@example.com', 'University E', 'MS');

INSERT INTO CLASS_BB VALUES
(1, 'ABC01', 'Math Class', 'Blue', 'Room 101', 28, 'Next to the library', 101),
(2, 'DEF02', 'English Class', 'Green', 'Room 202', 27, 'Second floor, west wing', 102),
(3, 'GHI03', 'Science Class', 'Red', 'Room 303', 26, 'Third floor, east wing', 103),
(4, 'JKL04', 'History Class', 'Yellow', 'Room 404', 25, 'Fourth floor, north wing', 104),
(5, 'MNO05', 'Art Class', 'Purple', 'Room 505', 29, 'Fifth floor, south wing', 105);

INSERT INTO STUDENT_BB VALUES
(1, 'John', 'Doe', 'A', 'JD', '2005-05-15', '123 Main St', 'City1', '12345', 'Main St', 1),
(2, 'Jane', 'Smith', 'B', 'JS', '2006-03-22', '456 Oak St', 'City2', '54321', 'Oak St', 2),
(3, 'Bob', 'Johnson', 'C', 'BJ', '2005-07-18', '789 Pine St', 'City3', '67890', 'Pine St', 3),
(4, 'Alice', 'Williams', 'D', 'AW', '2006-01-10', '101 Cedar St', 'City4', '13579', 'Cedar St', 4),
(5, 'Charlie', 'Brown', 'E', 'CB', '2007-04-30', '202 Elm St', 'City5', '24680', 'Elm St', 5);

INSERT INTO PARENT_BB VALUES
(1, 'Bob', 'Doe', 'C', '555-1111', '555-2222', '555-3333', 'bob@example.com', 'Father'),
(2, 'Alice', 'Smith', 'D', '555-4444', '555-5555', '555-6666', 'alice@example.com', 'Mother'),
(3, 'Charlie', 'Johnson', 'E', '555-7777', '555-8888', '555-9999', 'charlie@example.com', 'Father'),
(4, 'Diana', 'Williams', 'F', '555-0000', '555-1234', '555-5678', 'diana@example.com', 'Mother'),
(5, 'Edward', 'Brown', 'G', '555-4321', '555-8765', '555-9876', 'edward@example.com', 'Guardian');

SELECT * FROM CLASS_BB;
SELECT * FROM STUDENT_BB;
SELECT * FROM PARENT_BB;
SELECT * FROM TEACHER_BB;

#Task 5 - Query the data by Bethlehem Belay
SELECT CONCAT(S.FIRST_NAME_BB, ' ', S.LAST_NAME_BB) AS Student,
       C.CLASS_NAME_BB AS Level,
       C.CLASS_COLOR_BB AS Color,
       C.ROOM_NUMBER_BB AS Room,
       CONCAT(T.FIRST_NAME_BB, ' ', T.LAST_NAME_BB) AS Teacher
FROM STUDENT_BB S
JOIN CLASS_BB C ON S.CLASS_ID_BB = C.CLASS_ID_BB
JOIN TEACHER_BB T ON C.TEACHER_ID_BB = T.TEACHER_ID_BB
ORDER BY S.LAST_NAME_BB, S.FIRST_NAME_BB;

SELECT C.CLASS_COLOR_BB AS Color,
       C.CLASS_NAME_BB AS Level,
       S.FIRST_NAME_BB AS Student_Name,
       S.NICK_NAME_BB AS Nickname
FROM CLASS_BB C
JOIN STUDENT_BB S ON C.CLASS_ID_BB = S.CLASS_ID_BB
ORDER BY C.CLASS_COLOR_BB, C.CLASS_NAME_BB, S.LAST_NAME_BB, S.FIRST_NAME_BB;

SELECT P.FIRST_NAME_BB AS Parent_Name,
       P.LAST_NAME_BB AS Parent_Last_Name,
       P.PERSONAL_EMAIL_BB AS Parent_Email,
       S.FIRST_NAME_BB AS Student_Name,
       C.CLASS_NAME_BB AS Level,
       C.CLASS_COLOR_BB AS Color
FROM PARENT_BB P
JOIN PARENT_BB_STUDENT_BB PS ON P.PARENT_ID_BB = PS.PARENT_ID_BB
JOIN STUDENT_BB S ON PS.STUDENT_ID_BB = S.STUDENT_ID_BB
JOIN CLASS_BB C ON S.CLASS_ID_BB = C.CLASS_ID_BB
ORDER BY P.LAST_NAME_BB, P.FIRST_NAME_BB, S.LAST_NAME_BB, S.FIRST_NAME_BB;

SELECT T.FIRST_NAME_BB AS Teacher_Name,
       T.LAST_NAME_BB AS Teacher_Last_Name,
       S.FIRST_NAME_BB AS Student_Name,
       S.LAST_NAME_BB AS Student_Last_Name,
       P.FIRST_NAME_BB AS Parent_Name,
       P.LAST_NAME_BB AS Parent_Last_Name
FROM TEACHER_BB T
JOIN CLASS_BB C ON T.TEACHER_ID_BB = C.TEACHER_ID_BB
JOIN TEACHER_BB_STUDENT_BB TS ON T.TEACHER_ID_BB = TS.TEACHER_ID_BB
JOIN STUDENT_BB S ON TS.STUDENT_ID_BB = S.STUDENT_ID_BB
JOIN PARENT_BB_STUDENT_BB PS ON S.STUDENT_ID_BB = PS.STUDENT_ID_BB
JOIN PARENT_BB P ON PS.PARENT_ID_BB = P.PARENT_ID_BB
ORDER BY T.LAST_NAME_BB, T.FIRST_NAME_BB, S.LAST_NAME_BB, S.FIRST_NAME_BB, P.LAST_NAME_BB, P.FIRST_NAME_BB;

